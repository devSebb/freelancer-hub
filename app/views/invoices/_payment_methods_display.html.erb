<%# Displays payment methods for an invoice %>
<%# Usage: render "invoices/payment_methods_display", invoice: @invoice %>

<% if invoice.has_payment_methods? %>
  <div class="space-y-4">
    <% invoice.payment_methods.each do |method| %>
      <div class="flex items-start gap-4 p-4 bg-white/5 rounded-xl">
        <div class="w-10 h-10 bg-white/10 rounded-lg flex items-center justify-center flex-shrink-0">
          <% payment_icon = case method["type"]
               when "bank_transfer" then :bank_transfer
               when "paypal" then :paypal
               when "venmo" then :venmo
               when "zelle" then :zelle
               when "cashapp" then :cashapp
               when "crypto" then :crypto
               else :payment_other
               end %>
          <%= icon(payment_icon, size: :md, css_class: "text-white/60") %>
        </div>
        <div class="flex-1 min-w-0">
          <h4 class="text-sm font-medium text-white"><%= method["label"] || t("invoices.payment_methods.types.#{method['type']}") %></h4>
          <div class="mt-1 text-sm text-white/60 space-y-0.5">
            <% case method["type"] %>
            <% when "bank_transfer" %>
              <% if method["bank_name"].present? %><p><%= method["bank_name"] %></p><% end %>
              <% if method["account_number"].present? %><p>Account: <%= method["account_number"] %></p><% end %>
              <% if method["routing_number"].present? %><p>Routing: <%= method["routing_number"] %></p><% end %>
            <% when "paypal", "zelle" %>
              <% if method["email"].present? %><p><%= method["email"] %></p><% end %>
            <% when "venmo", "cashapp" %>
              <% if method["handle"].present? %><p><%= method["handle"] %></p><% end %>
            <% when "crypto" %>
              <% if method["address"].present? %><p class="font-mono text-xs break-all"><%= method["address"] %></p><% end %>
              <% if method["instructions"].present? %><p class="text-white/40"><%= method["instructions"] %></p><% end %>
            <% else %>
              <% if method["instructions"].present? %><p><%= method["instructions"] %></p><% end %>
            <% end %>
          </div>
        </div>
      </div>
    <% end %>
  </div>
<% end %>

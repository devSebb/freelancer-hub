<!DOCTYPE html>
<html lang="<%= I18n.locale %>">
  <head>
    <title>Billdeck — Clients. Proposals. Invoices.</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="description" content="A bold hub for freelancers. Manage clients, send proposals, create invoices. Nothing more, nothing less.">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <link rel="manifest" href="/manifest.json">
    <link rel="icon" href="/icon.png" type="image/png">
    <link rel="icon" href="/icon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="/icon.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&family=Yellowtail&display=swap" rel="stylesheet">
    <%= stylesheet_link_tag "tailwind", "data-turbo-track": "reload" %>
    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>

    <style>
      :root {
        --accent: #94F7AD;
        --accent-rgb: 148, 247, 173;
      }

      body { font-family: 'Poppins', sans-serif; }
      .font-special { font-family: 'Yellowtail', cursive; }

      /* ── Keyframe Animations ── */
      @keyframes fadeInUp {
        from { opacity: 0; transform: translateY(40px); }
        to { opacity: 1; transform: translateY(0); }
      }
      @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
      }
      @keyframes fadeInLeft {
        from { opacity: 0; transform: translateX(-40px); }
        to { opacity: 1; transform: translateX(0); }
      }
      @keyframes fadeInRight {
        from { opacity: 0; transform: translateX(40px); }
        to { opacity: 1; transform: translateX(0); }
      }
      @keyframes scaleIn {
        from { opacity: 0; transform: scale(0.9); }
        to { opacity: 1; transform: scale(1); }
      }
      @keyframes pulse-slow {
        0%, 100% { opacity: 0.3; transform: scale(1); }
        50% { opacity: 0.6; transform: scale(1.05); }
      }
      @keyframes float {
        0%, 100% { transform: translateY(0px); }
        50% { transform: translateY(-12px); }
      }
      @keyframes shimmer {
        0% { background-position: -200% 0; }
        100% { background-position: 200% 0; }
      }
      @keyframes rotate-slow {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
      }
      @keyframes dash-move {
        to { stroke-dashoffset: -20; }
      }
      @keyframes grain-drift {
        0%, 100% { transform: translate(0, 0); }
        10% { transform: translate(-2%, -2%); }
        30% { transform: translate(1%, -1%); }
        50% { transform: translate(-1%, 2%); }
        70% { transform: translate(2%, 1%); }
        90% { transform: translate(-2%, 1%); }
      }

      /* ── Animation Classes ── */
      .animate-fade-in-up { animation: fadeInUp 0.8s ease-out forwards; }
      .animate-fade-in { animation: fadeIn 1s ease-out forwards; }
      .animate-fade-in-left { animation: fadeInLeft 0.8s ease-out forwards; }
      .animate-fade-in-right { animation: fadeInRight 0.8s ease-out forwards; }
      .animate-scale-in { animation: scaleIn 0.6s ease-out forwards; }
      .animate-float { animation: float 6s ease-in-out infinite; }
      .pulse-slow { animation: pulse-slow 5s ease-in-out infinite; }

      .animate-delay-100 { animation-delay: 0.1s; }
      .animate-delay-200 { animation-delay: 0.2s; }
      .animate-delay-300 { animation-delay: 0.3s; }
      .animate-delay-400 { animation-delay: 0.4s; }
      .animate-delay-500 { animation-delay: 0.5s; }
      .animate-delay-600 { animation-delay: 0.6s; }
      .animate-delay-700 { animation-delay: 0.7s; }
      .animate-delay-800 { animation-delay: 0.8s; }

      .opacity-0 { opacity: 0; }

      /* ── Scroll-triggered reveal ── */
      .reveal {
        opacity: 0;
        transform: translateY(30px);
        transition: opacity 0.7s ease-out, transform 0.7s ease-out;
      }
      .reveal.revealed {
        opacity: 1;
        transform: translateY(0);
      }
      .reveal-left {
        opacity: 0;
        transform: translateX(-30px);
        transition: opacity 0.7s ease-out, transform 0.7s ease-out;
      }
      .reveal-left.revealed {
        opacity: 1;
        transform: translateX(0);
      }
      .reveal-right {
        opacity: 0;
        transform: translateX(30px);
        transition: opacity 0.7s ease-out, transform 0.7s ease-out;
      }
      .reveal-right.revealed {
        opacity: 1;
        transform: translateX(0);
      }
      .reveal-scale {
        opacity: 0;
        transform: scale(0.95);
        transition: opacity 0.6s ease-out, transform 0.6s ease-out;
      }
      .reveal-scale.revealed {
        opacity: 1;
        transform: scale(1);
      }

      /* ── Editorial headline treatment ── */
      .headline-word {
        display: block;
        line-height: 0.88;
        letter-spacing: -0.05em;
      }

      /* ── Smooth scroll ── */
      html { scroll-behavior: smooth; }

      /* ── Noise/Grain Overlay ── */
      .noise-overlay::before {
        content: '';
        position: fixed;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.04'/%3E%3C/svg%3E");
        pointer-events: none;
        z-index: 9999;
        animation: grain-drift 8s steps(10) infinite;
        opacity: 0.4;
      }

      /* ── Dot grid pattern ── */
      .dot-pattern {
        background-image: radial-gradient(rgba(148,247,173,0.08) 1px, transparent 1px);
        background-size: 24px 24px;
      }

      /* ── Grid background pattern ── */
      .grid-pattern {
        background-image:
          linear-gradient(rgba(148,247,173,0.04) 1px, transparent 1px),
          linear-gradient(90deg, rgba(148,247,173,0.04) 1px, transparent 1px);
        background-size: 60px 60px;
      }

      /* ── Line pattern ── */
      .line-pattern {
        background-image: repeating-linear-gradient(
          -45deg,
          transparent,
          transparent 10px,
          rgba(148,247,173,0.03) 10px,
          rgba(148,247,173,0.03) 11px
        );
      }

      /* ── Glassmorphism card ── */
      .glass-card {
        background: rgba(255,255,255,0.03);
        backdrop-filter: blur(16px);
        -webkit-backdrop-filter: blur(16px);
        border: 1px solid rgba(255,255,255,0.08);
      }
      .glass-card-accent {
        background: rgba(148,247,173,0.04);
        backdrop-filter: blur(16px);
        -webkit-backdrop-filter: blur(16px);
        border: 1px solid rgba(148,247,173,0.12);
      }

      /* ── Layered shadows ── */
      .shadow-layered {
        box-shadow:
          0 1px 2px rgba(0,0,0,0.3),
          0 4px 8px rgba(0,0,0,0.25),
          0 16px 32px rgba(0,0,0,0.2);
      }
      .shadow-glow {
        box-shadow:
          0 0 20px rgba(148,247,173,0.1),
          0 0 60px rgba(148,247,173,0.05),
          0 4px 16px rgba(0,0,0,0.3);
      }

      /* ── Accent utilities ── */
      .text-accent { color: var(--accent); }
      .bg-accent { background-color: var(--accent); }
      .border-accent { border-color: var(--accent); }
      .accent-glow {
        background: radial-gradient(ellipse at center, rgba(var(--accent-rgb),0.15) 0%, transparent 70%);
      }

      /* ── Button radius ── */
      .btn-radius { border-radius: 13px; }

      /* ── Diagonal section clip ── */
      .diagonal-top {
        clip-path: polygon(0 5%, 100% 0, 100% 100%, 0 100%);
      }
      .diagonal-both {
        clip-path: polygon(0 3%, 100% 0, 100% 97%, 0 100%);
      }

      /* ── Shimmer effect for text ── */
      .text-shimmer {
        background: linear-gradient(
          110deg,
          var(--accent) 0%,
          #ffffff 25%,
          var(--accent) 50%,
          #ffffff 75%,
          var(--accent) 100%
        );
        background-size: 200% 100%;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        animation: shimmer 6s linear infinite;
      }

      /* ── CSS illustration styles ── */
      .illustration-card {
        position: relative;
        overflow: hidden;
      }
      .illustration-card::after {
        content: '';
        position: absolute;
        top: -50%;
        right: -50%;
        width: 100%;
        height: 100%;
        background: radial-gradient(circle, rgba(var(--accent-rgb),0.08) 0%, transparent 60%);
        pointer-events: none;
      }

      /* ── Bento cell hover ── */
      .bento-cell {
        transition: all 0.4s cubic-bezier(0.25,0.46,0.45,0.94);
      }
      .bento-cell:hover {
        transform: translateY(-4px);
        box-shadow:
          0 0 30px rgba(var(--accent-rgb),0.08),
          0 8px 24px rgba(0,0,0,0.3);
        border-color: rgba(var(--accent-rgb),0.2);
      }

      /* ── Scrollbar ── */
      ::-webkit-scrollbar { width: 6px; }
      ::-webkit-scrollbar-track { background: #000; }
      ::-webkit-scrollbar-thumb { background: rgba(148,247,173,0.2); border-radius: 3px; }
      ::-webkit-scrollbar-thumb:hover { background: rgba(148,247,173,0.4); }
    </style>
  </head>

  <body class="bg-black text-white antialiased overflow-x-hidden noise-overlay">
    <%= yield %>

    <script>
      // Scroll-triggered reveal animations
      document.addEventListener('turbo:load', initReveals);
      document.addEventListener('DOMContentLoaded', initReveals);

      function initReveals() {
        const reveals = document.querySelectorAll('.reveal, .reveal-left, .reveal-right, .reveal-scale');
        if (!reveals.length) return;

        const observer = new IntersectionObserver((entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              const delay = entry.target.dataset.revealDelay || 0;
              setTimeout(() => {
                entry.target.classList.add('revealed');
              }, parseInt(delay));
              observer.unobserve(entry.target);
            }
          });
        }, { threshold: 0.15, rootMargin: '0px 0px -40px 0px' });

        reveals.forEach(el => observer.observe(el));
      }
    </script>
  </body>
</html>
